!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).anime=e()}(this,(function(){"use strict";class t{constructor(){this.queue=[]}add(t){return this.queue.push(new o(t)),this}play(){this.queue.forEach((t=>t.play()))}}const e={targets:null,duration:1/0,easing:"linear",delay:0,begin:null,update:null,complete:null};const s=(()=>{const t={linear:()=>t=>t},e={Sine:()=>t=>1-Math.cos(t*Math.PI/2),Expo:()=>t=>t?Math.pow(2,10*t-10):0,Circ:()=>t=>1-Math.sqrt(1-t*t),Back:()=>t=>t*t*(3*t-2),Bounce:()=>t=>{let e,s=4;for(;t<((e=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((3*e-2)/22-t,2)}};return["Quad","Cubic","Quart","Quint"].forEach(((t,s)=>{e[t]=()=>t=>Math.pow(t,s+2)})),Object.keys(e).forEach((s=>{const a=e[s];t["easeIn"+s]=a,t["easeOut"+s]=()=>t=>1-a()(1-t),t["easeInOut"+s]=()=>t=>t<.5?a()(2*t)/2:1-a()(-2*t+2)/2,t["easeOutIn"+s]=()=>t=>t<.5?(1-a()(1-2*t))/2:(a()(2*t-1)+1)/2})),t})(),a=["translateX","translateY","translateZ"],n=(t,e)=>t instanceof HTMLElement?"transform"in t.style&&a.includes(e)?"transform":e in t.style?"style":"attribute":"attribute";class o{constructor(t=e){t={...e,...t};const{targets:s,duration:a,easing:n,delay:o,begin:r,update:i,complete:l,...u}=t;this.targets=s,this.duration=a,this.easing=n,this.delay=o,this.begin=r,this.update=i,this.complete=l,this.dest=u||{},this.tl=null,this.isPlay=!1}timeline(){return this.tl||(this.tl=new t),this.tl}play(){this.isPlay||(this.isPlay=!0,(t=>{const e=Date.now()+t.delay,a=e+t.duration,o=!!t.targets,r=[],i=(t,e,s,a,o,r=!1)=>{let i;if("string"==typeof a){if(i=a.endsWith("%")?"%":a.endsWith("px")?"px":null,!i)throw new TypeError("string value must ends with '%' or 'px'");a=parseFloat(a)}let l=r?a:(a-e)*s+e;i&&(l+=i);const u=n(t,o);"transform"===u?t.style.transform=`${o}(${l}${i?"":"px"})`:"style"===u?t.style[o]=l:t[o]=l},l=(a,n,o=!1)=>{t.targets.forEach(((l,u)=>{Object.keys(t.dest).forEach((f=>{let c=parseFloat(r[u][f]),h=t.dest[f];if("object"==typeof h)if(Array.isArray(h)){let a=0;for(;a<h.length&&n-e>=h[a].startTimeStamp;)a++;const{value:r,duration:u,easing:p=t.easing,startTimeStamp:y}=h[a-1];c=a<=1?c:h[a-2].value;const d=s[p]()((n-e-y)/u);n<=e+u+y?i(l,c,d,r,f):o&&i(l,c,d,r,f,o)}else{const{value:a,duration:r,easing:u=t.easing}=h,p=s[u]()((n-e)/r);n<=e+r?i(l,c,p,a,f):o&&i(l,c,p,a,f,o)}else"function"==typeof h&&(h=h(l,u)),i(l,c,a,h,f,o)}))}))},u=()=>{const n=Date.now();if(n>a)l(1,n,!0),"function"==typeof t.complete&&t.complete(t.targets),t.isPlay=!1;else{if(n>=e){const a=s[t.easing]()((n-e)/t.duration);o&&l(a,n),"function"==typeof t.update&&t.update(t.targets)}requestAnimationFrame(u)}};(()=>{if(o){Array.isArray(t.targets)||(t.targets=[t.targets]);for(const e of t.targets){const s={};for(const a in t.dest){const o=t.dest[a],r=n(e,a);if(Array.isArray(o))if(2===o.length&&"object"!=typeof o[0])"transform"===r?e.style.transform=`${a}(${"string"==typeof o[0]?o[0]:o[0]+"px"})`:"style"===r?e.style[a]=o[0]:e[a]=o[0],s[a]=o[0],t.dest[a]=o[1];else{let t=0;for(let e of o)e.startTimeStamp=t,t+=e.duration;s[a]=e[a]}else s[a]="transform"===r?e.style.transform.match(new RegExp(`${a}\\((\\w+)\\)`))[1]:"style"===r?e.style[a]:e[a]}r.push(s)}}})(),"function"==typeof t.begin&&t.begin(t.targets),u()})(this))}}const r=t=>new o(t);return r.random=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,r}));
